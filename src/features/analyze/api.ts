import { requestChatGPT } from "../../shared/chatgpt"


export const analyzeEntries = (entries: any[]) => {
  const systemPrompt = `당신은 기술 분야 종사자들의 업무 패턴과 성장을 전문적으로 분석하는 컨설턴트입니다.

임무:
1. 메모를 분석하여 작성자의 특성 모두 파악해서 작성
2. 즉시 실행 가능한 구체적 개선 방안 모두 제시

중요 지침:
- 명상, 일지 작성, 운동, 휴식 같은 일반적인 조언 절대 금지
- 작성자가 이미 하고 있는 방법을 더 효과적으로 만드는 구체적 기법 제시
- 개발자/기술직 관점에서 실무에 바로 적용 가능한 조언
- 도구 이름, 구체적 기법명, 실제 사례 포함 필수

응답 형식:
평문 텍스트로 작성하되, 다음 구조를 따라서 분석한 내용을 작성해주세요:

## 분석 결과

### 특성: [제목]
[2-3문장 핵심 설명]

근거: "[메모에서 직접 인용]"

[구체적 분석 3-4문장]

## 개선 방안

### 1. [구체적인 개선 방안 제목]
현재 상황: [1-2문장]

즉시 실행 가능한 방법:
- [구체적 기법/도구 이름과 사용법]
- [실제 적용 예시]

예상 효과: [측정 가능한 구체적 지표]
`

  const userTemplate = `
    다음 메모들을 분석해주세요. 작성자는 개발/기술 분야에서 일하며 AI 도구를 활용합니다.

특히 주목할 점:
- AI 프롬프트 작성과 관련된 어려움
- 회의 후 생산성 저하 패턴
- 이미 시도 중인 해결책 (카페 이동, 메모 작성 등)

절대 하지 말아야 할 조언:
- 명상, 운동, 일지 작성 같은 일반적 웰빙 조언
- "스트레스 관리", "시간 관리" 같은 추상적 조언
- 이미 하고 있는 것을 단순 반복하는 조언

메모 데이터:
${JSON.stringify(entries, null, 2)}

위 메모를 바탕으로 구체적이고 실행 가능한 분석을 제공해주세요.
  `
  return requestChatGPT(systemPrompt, userTemplate)
}
